{% load static %}
<!doctype html>
<html lang="en">
<head>
    <title>UIU Job Bank</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <link rel="stylesheet" href="{% static 'css/custom-bs.css' %}">
    <link rel="stylesheet" href="{% static 'css/jquery.fancybox.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap-select.min.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">
    <link rel="stylesheet" href="{% static 'fonts/line-icons/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/quill.snow.css' %}">
    <link rel="shortcut icon" href="{% static 'images/uiu.jpg' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}">


</head>
<body id="top">
<div class="messenger-icon" id="messenger-icon" onclick="toggleChatContainer()">
    <span class="icon-chat"></span>
</div>
<div class="chat-container" id="chat-container">
    <div class="chat-header">
        UIU Chatbot
    </div>
    <div class="chat-box" id="chat-box">
        <div class="bot-msg">Hello! How can I help you?</div>
    </div>
    <div class="input-container">
        <input type="text" class="user-input" id="user-input" placeholder="Type your message...">
        <button class="send-button" onclick="sendMessage()">Send</button>
    </div>
</div>

<div id="overlayer"></div>
<div class="loader">
    <img src="{% static 'images/smartuiu.png' %}" alt="Loading..." height="447" width="559" align="center">
</div>


<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->


    <!-- NAVBAR -->
    <header class="site-navbar mt-3">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="site-logo col-6">
                    {% load static %}

                    <a href="{% url 'index' %}">
                        <img src="{% static 'images/uiu.jpg' %}" alt="logo" height="70px" width="80px" align="center">
                    </a>

                    <a href="{% url 'index' %}">
                        <img src="{% static 'images/smartuiu.png' %}" alt="logo" height="110px" width="130px"
                             align="center">
                    </a>

                </div>
            <nav class="mx-auto site-navigation">
                <ul class="site-menu js-clone-nav d-none d-xl-block ml-0 pl-0">
                    <li><a href="{% url 'index' %}" class="nav-link active">Home</a></li>
                    <li><a href="{% url 'index' %}" class="nav-link active" onclick="login_check()">Academic</a></li>
                    <li><a href="{% url 'index' %}" class="nav-link active" onclick="login_check()">Blogs</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle active" href="#" id="navbarDropdown" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false" onclick="login_check()">
                            Features
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="{% url 'lost_and_found' %}">Lost & Found</a></li>
                            <li><a class="dropdown-item" href="{% url 'thesis_finder' %}">Thesis Finder</a></li>
                        </ul>
                    </li>
                    <li><a href="{% url 'developers' %}" class="nav-link active">Developers</a></li>
                    <li><a href="{% url 'contacts' %}" class="nav-link active">Contact Us</a></li>
                </ul>
            </nav>

                <div class="right-cta-menu text-right d-flex aligin-items-center col-6">
                    <div class="ml-auto">
                        <a href="{% url 'signup' %}" class="btn btn-primary border-width-2 d-none d-lg-inline-block">
                            <span class="mr-2 icon-lock_outline"></span>Sign Up
                        </a>
{#                        <a href="{% url 'signup' %}"#}
{#                           class="btn btn-primary border-width-2 d-none d-lg-inline-block"><span#}
{#                                class="mr-2 icon-lock_outline"></span>Sign Up</a>#}
                    </div>
                    <a href="#" class="site-menu-toggle js-menu-toggle d-inline-block d-xl-none mt-lg-2 ml-3"><span
                            class="icon-menu h3 m-0 p-0 mt-2"></span></a>
                </div>

            </div>
        </div>
    </header>


    <!-- HOME -->
    <section class="section-hero overlay inner-page bg-image"
             style="background-image: url('{% static 'images/hero_1.jpg' %}');"
             id="home-section">
        <div class="container">
            <div class="row">
                <div class="col-md-7">
                    <h1 class="text-white font-weight-bold">Login</h1>
                    <div class="custom-breadcrumbs">
                        <a href="#">Home</a> <span class="mx-2 slash">/</span>
                        <span class="text-white"><strong>Log In</strong></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <form id="login-form" method="post">
        {% csrf_token %}
        <section class="site-section">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-4">
                    <h2 class="mb-4">Login</h2>
                    <div class="row form-group">
                        <div class="col-md-12 mb-3 mb-md-0">
                            <label class="text-black" for="email_login">Username</label>
                            <input type="email" name="username" id="email_login" class="form-control"
                                   placeholder="Email or username">
                            <div id="email_warning" class="text-danger"></div> <!-- Warning message for email -->
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-12 mb-3 mb-md-0">
                            <label class="text-black" for="password_login">Password</label>
                            <input type="password" name="password" id="password_login" class="form-control"
                                   placeholder="Password">
                            <div id="password_warning" class="text-danger"></div> <!-- Warning message for password -->
                        </div>
                    </div>
                    <div class="row form-group">
                        <div class="col-md-12">
                            <input type="submit" value="Login" class="btn px-4 btn-primary text-white">
                            <span class="ml-3"><a href="{% url 'forget_email' %}"
                                                  id="forgot_password_link">Forgot Password?</a></span>

                        </div>
                    </div>
                </div>
            </div>
        </section>
    </form>

    <script>
        document.getElementById("login-form").addEventListener("submit", function (event) {
            event.preventDefault();
            var email = document.getElementById("email_login").value;
            var password = document.getElementById("password_login").value;

            var emailInput = document.getElementById("email_login");
            var passwordInput = document.getElementById("password_login");

            emailInput.classList.remove("error-border");
            passwordInput.classList.remove("error-border");

            if (email.length < 6 || password.length < 6) {
                if (email.length < 6) {
                    emailInput.classList.add("error-border");
                    document.getElementById("email_warning").textContent = "Email should have at least 6 characters.";
                }

                if (password.length < 6) {
                    passwordInput.classList.add("error-border");
                    document.getElementById("password_warning").textContent = "Password should have at least 6 characters.";
                }
            } else {
                var formData = new FormData(this);
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "{% url 'login' %}", true);  // Replace with the correct URL
                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");  // Include CSRF token

                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        if (xhr.status === 200) {
                            var response = JSON.parse(xhr.responseText);
                            if (response.status === 'success') {
                                window.location.replace("{% url 'homepage' %}");
                            } else {
                                alert(response.message);
                            }
                        }
                    }
                };
                xhr.send(formData);
            }
        });

        var emailInput = document.getElementById("email_login");
        emailInput.addEventListener("input", validateEmail);

        var passwordInput = document.getElementById("password_login");
        passwordInput.addEventListener("input", validatePassword);

        function validateEmail() {
            var email = emailInput.value;
            var emailWarning = document.getElementById("email_warning");
            if (email.length >= 6) {
                emailInput.classList.remove("error-border");
                emailWarning.textContent = ""; // Clear any previous warning messages
            } else {
                emailInput.classList.add("error-border");
                emailWarning.textContent = "Email should have at least 6 characters.";
            }
        }

        function validatePassword() {
            var password = passwordInput.value;
            var passwordWarning = document.getElementById("password_warning");
            if (password.length >= 6) {
                passwordInput.classList.remove("error-border");
                passwordWarning.textContent = ""; // Clear any previous warning messages
            } else {
                passwordInput.classList.add("error-border");
                passwordWarning.textContent = "Password should have at least 6 characters.";
            }
        }
    </script>


    <footer class="site-footer">

        <a href="#top" class="smoothscroll scroll-top">
            <span class="icon-keyboard_arrow_up"></span>
        </a>

        <div class="container">
            <div class="row mb-5">
                <div class="col-6 col-md-3 mb-4 mb-md-0">
                    <h3>Search Trending</h3>
                    <ul class="list-unstyled">
                        <li><a href="#">Web Design</a></li>
                        <li><a href="#">Graphic Design</a></li>
                        <li><a href="#">Web Developers</a></li>
                        <li><a href="#">Python</a></li>
                        <li><a href="#">HTML5</a></li>
                        <li><a href="#">CSS3</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md-3 mb-4 mb-md-0">
                    <h3>Company</h3>
                    <ul class="list-unstyled">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Career</a></li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Resources</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md-3 mb-4 mb-md-0">
                    <h3>Support</h3>
                    <ul class="list-unstyled">
                        <li><a href="#">Support</a></li>
                        <li><a href="#">Privacy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="col-6 col-md-3 mb-4 mb-md-0">
                    <h3>Contact Us</h3>
                    <div class="footer-social">
                        <a href="#"><span class="icon-facebook"></span></a>
                        <a href="#"><span class="icon-twitter"></span></a>
                        <a href="#"><span class="icon-instagram"></span></a>
                        <a href="#"><span class="icon-linkedin"></span></a>
                    </div>
                </div>
            </div>

            <div class="row text-center">
                <div class="col-12">
                    <p class="copyright"><small>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script>
                        All rights reserved | This template is made with <i class="icon-heart text-danger"
                                                                            aria-hidden="true"></i> by <a
                            href="https://binarybrains.com" target="_blank">BinaryBrains</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </small>
                    </p>
                </div>
            </div>
        </div>
    </footer>

</div>

<!-- SCRIPTS -->
{% load static %}

<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'js/isotope.pkgd.min.js' %}"></script>
<script src="{% static 'js/stickyfill.min.js' %}"></script>
<script src="{% static 'js/jquery.fancybox.min.js' %}"></script>
<script src="{% static 'js/jquery.easing.1.3.js' %}"></script>
<script src="{% static 'js/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'js/jquery.animateNumber.min.js' %}"></script>
<script src="{% static 'js/owl.carousel.min.js' %}"></script>
<script src="{% static 'js/quill.min.js' %}"></script>
<script src="{% static 'js/bootstrap-select.min.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script src="{% static 'js/chatbot.js' %}"></script>


</body>
</html>