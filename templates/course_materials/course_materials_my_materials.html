{% load static %}
<!doctype html>
<html lang="en">
{% include 'expendable/head.html' %}
<body id="top">
{#{% include 'expendable/chatbot_and_loading.html' %}#}

<div class="site-wrap">

    <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
            <div class="site-mobile-menu-close mt-3">
                <span class="icon-close2 js-menu-toggle"></span>
            </div>
        </div>
        <div class="site-mobile-menu-body"></div>
    </div> <!-- .site-mobile-menu -->

    <!-- NAVBAR -->
    {% include 'expendable/navbar.html' %}
    <!-- HOME -->
    <section class="section-hero home-section overlay inner-page bg-image"
             style="background-image: url('{% static 'images/hero_1.jpg' %}');" id="home-section">

        <div class="container">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-12 text-center mb-5">
                    <h1 class="text-white font-weight-bold">Welcome to the Course Material Section</h1>
                    <p class="text-white font-weight-bold">Find course materials and questions that you need!</p>
                </div>
                <div class="col-md-12">
                    <form method="post" class="search-jobs-form">
                        {% csrf_token %}
                        <div class="row mb-5 justify-content-center">
                            <div class="col-5">
                                <input type="text" class="form-control form-control-lg"
                                       placeholder="Search for materials...">
                            </div>
                            <div class="col-2">
                                <button type="submit" class="btn btn-primary btn-lg btn-block text-white btn-search">
                                    <span class="icon-search icon mr-2"></span>Search
                                </button>
                            </div>
                        </div>
                        <div class="row justify-content-center">
                            <div class="col-md-12 popular-keywords">
                                <!-- Keywords content goes here -->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <a href="#next" class="scroll-button smoothscroll">
            <span class="icon-keyboard_arrow_down"></span>
        </a>
    </section>

    <div class="container mt-5 mb-5">
        <h2 class="text-center mb-4">Manage Course Materials</h2>

        <!-- TABLE TO DISPLAY COURSE MATERIALS -->
        <div class="card shadow-sm">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Course Materials List</h5>
            </div>
            <div class="card-body">
                <table class="table table-hover table-wrap">
                    <thead>
                    <tr>
                        <th>Degree Name</th>
                        <th>Trimester/ Semester</th>
                        <th>Course Title</th>
                        <th>Material Type</th>
                        <th>Admin</th>
                        <th>Uploaded</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for material in materials %}
                        <tr>
                            <td>
                                {% if material.degree == "bscse" %}
                                    B.Sc. in Computer Science & Engineering
                                {% elif material.degree == "mscse" %}
                                    M.Sc. in Computer Science & Engineering
                                {% elif material.degree == "bsds" %}
                                    B.Sc. in Data Science
                                {% elif material.degree == "bseee" %}
                                    B.Sc. in Electrical & Electronics Engineering
                                {% elif material.degree == "bsce" %}
                                    B.Sc. in Civil Engineering
                                {% elif material.degree == "bba" %}
                                    BBA
                                {% elif material.degree == "mba" %}
                                    MBA
                                {% elif material.degree == "bt" %}
                                    B.Sc. in Bio Technology & Genetic Engineering
                                {% elif material.degree == "bp" %}
                                    B. Pharma.
                                {% elif material.degree == "bse" %}
                                    B.Sc. in Economics
                                {% elif material.degree == "ba" %}
                                    B.A. in English
                                {% else %}
                                    {{ material.degree }} <!-- Default if none match -->
                                {% endif %}
                            </td>
                            <td>{{ material.trimester }}</td>
                            <td>{{ material.course_title }}</td>
                            <td>{{ material.material_type }}</td>
                            <td>{{ material.user.get_full_name }}</td>
                            <!-- Assuming 'admin' is a ForeignKey to User model -->
                            <td>{{ material.created_at }}</td>
                            <td>
                                <a href="{% url 'edit_course_material' material.id %}" class="btn btn-warning btn-sm">Edit</a>
                                <a href="{% url 'delete_course_material' material.id %}" class="btn btn-danger btn-sm"
                                   onclick="return confirm('Are you sure you want to delete this material?');">Delete</a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="8" class="text-center">No course materials available.</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    {% include 'expendable/footer.html' %}

</div>

<style>
    .table-wrap {
        table-layout: auto; /* Allow the table to adjust column widths based on content */
    }

    .table-wrap th, .table-wrap td {
        word-wrap: break-word; /* Allow text to wrap within cells */
        overflow-wrap: break-word; /* Support for different browsers */
    }
</style>

</body>
</html>